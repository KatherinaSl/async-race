"use strict";(self.webpackChunkasync_race_api=self.webpackChunkasync_race_api||[]).push([[792],{455:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,"/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}",""]);const s=i},156:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,".garage-page .garage-page__title{color:#fff;padding:10px;padding-top:50px;margin:0}.garage-page .garage-page__number{color:#fff;padding:10px 0 30px 10px;font-size:1em}.garage-page .operations{width:fit-content}.garage-page .operations .row{display:flex;gap:5px;margin:5px;align-items:center;justify-content:space-between}.garage-page .operations .row .button{border-radius:5px;border:none}.garage-page .operations input[type=text]{border:none;border-radius:5px;outline:none;font-size:1em;color:#000;height:40px;text-align:center}.garage-page .operations input[type=color]{background:none;width:50px;height:50px}.button{display:flex;justify-content:center;cursor:pointer}.button p{margin:10px;font-size:1em}.button:hover{background-color:#a9a9a9}.button:active{transform:translate(0, 2px)}",""]);const s=i},992:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,".header{display:flex;height:15vh;width:100%;align-items:center;justify-content:center}.header .logo{align-self:center}.header .logo p{color:#fff;text-align:center;padding:20px;padding-top:120px;font-size:2em;text-shadow:1px -1px #db7093,-1px 1px #db7093}.header .navigation{position:absolute;left:0;top:5px;display:flex}.header .navigation .button:disabled{background:#c9b0b0;border:2px solid #b74f72}.header .navigation .button{margin:5px;display:flex;justify-content:center;border-radius:10px;background:#db7093;border:2px solid #cb3365;box-shadow:0 5px 8px #a9a9a9;transition:all 0s ease-in-out;cursor:pointer}.header .navigation .button p{margin:10px;font-size:1em}.header .navigation .button:active{transform:translate(0, 2px)}.header .navigation .button:active:hover{transform:scale(1.05)}",""]);const s=i},438:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,".pagination{display:flex;justify-content:center;gap:30px;padding:20px;align-self:center}.pagination .button{border-radius:5px;border:none}.pagination .button p{margin:10px 30px;font-size:1em}",""]);const s=i},358:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,"input[type=text]{border:none;border-radius:5px;outline:none;font-size:1em;color:#000;height:40px;text-align:center}input[type=color]{background:none;width:50px;height:50px}.tracks{margin:20px 0;display:flex;flex-direction:column;gap:10px}.tracks .car-name{font-size:1.2em;color:#fff}.tracks .car{display:flex;justify-content:space-between;border-bottom:3px dashed #e7e8eb}.tracks .car svg{width:100px;height:60px}.tracks .car img:last-child{padding-right:200px;z-index:1}.nav-bar{display:flex;width:fit-content;gap:5px}.nav-bar .button{border:2px solid #cb3365;border-radius:10px}.nav-bar .button:hover{transform:scale(1.05)}",""]);const s=i},918:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,".winners-page .winners-page__title{color:#fff;padding:10px;margin:0}.winners-page .winners-page__number{color:#fff;padding:10px 0 30px 10px;font-size:1em}.winners-page .winners-rating{color:#fff;width:fit-content;margin-bottom:50px}.winners-page .winners-rating .winners-rating__table{border-collapse:collapse;width:80vw}.winners-page .winners-rating .winners-rating__table #time,.winners-page .winners-rating .winners-rating__table #wins{cursor:pointer}.winners-page .winners-rating .winners-rating__table th,.winners-page .winners-rating .winners-rating__table td{width:100px;text-align:center;border:2px solid #cb3365;padding:10px;vertical-align:middle;font-size:1.2em}.winners-page .winners-rating .winners-rating__table th svg,.winners-page .winners-rating .winners-rating__table td svg{width:40px;height:40px}",""]);const s=i},11:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),o=n.n(r),a=n(314),i=n.n(a)()(o());i.push([e.id,'*{padding:0;margin:0;font-family:"Roboto",sans-serif}body{background-color:#2d2a35;display:flex;flex-direction:column;min-height:100vh;width:100%}.winner-message{z-index:1;width:100%;opacity:100;display:flex;justify-content:center;align-items:center;text-align:center;min-height:100vh;position:fixed}.winner-message p{color:#cb3365;font-size:3em}.hidden{display:none}.error-message{right:5px;top:5px;z-index:1;width:30%;opacity:100;display:flex;justify-content:flex-end;align-items:center;text-align:center;min-height:4%;position:fixed;border:2px solid red;background-color:#2d2a35}.error-message p{padding:5px;color:#fff;font-size:1em}',""]);const s=i},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,a){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);r&&i[l[0]]||(void 0!==a&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=a),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},i=[],s=0;s<e.length;s++){var c=e[s],d=r.base?c[0]+r.base:c[0],l=a[d]||0,u="".concat(d," ").concat(l);a[d]=l+1;var p=n(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var g=o(h,r);r.byIndex=s,t.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var a=r(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<a.length;i++){var s=n(a[i]);t[s].references--}for(var c=r(e,o),d=0;d<a.length;d++){var l=n(a[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}a=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},370:(e,t,n)=>{var r=n(72),o=n.n(r),a=n(825),i=n.n(a),s=n(659),c=n.n(s),d=n(56),l=n.n(d),u=n(540),p=n.n(u),h=n(113),g=n.n(h),m=n(11),b={};b.styleTagTransform=g(),b.setAttributes=l(),b.insert=c().bind(null,"head"),b.domAPI=i(),b.insertStyleElement=p(),o()(m.A,b),m.A&&m.A.locals&&m.A.locals;var f=n(455),v={};function y(e,t){const n=document.createElement(e);return t&&n.classList.add(t),n}function w(e,t,n){const r=y("button","button"),o=y("p");return o.textContent=e,t&&(r.type=t),n&&(r.disabled=n),r.append(o),r}function x(e,t,n,r){const o=y("input");return o.classList.add(e),o.type=t,n&&(o.value=n),r&&(o.disabled=r),o}v.styleTagTransform=g(),v.setAttributes=l(),v.insert=c().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=p(),o()(f.A,v),f.A&&f.A.locals&&f.A.locals;var S=n(156),E={};E.styleTagTransform=g(),E.setAttributes=l(),E.insert=c().bind(null,"head"),E.domAPI=i(),E.insertStyleElement=p(),o()(S.A,E),S.A&&S.A.locals&&S.A.locals;const A="#ffffff",k=["Position","Car","Name","Wins","Time"],_=n.p+"icons8-finish-flag-64.png";var T=n(358),M={};function z(e){return`<svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="1280.000000pt" height="640.000000pt" viewBox="0 0 1280.000000 640.000000"\n preserveAspectRatio="xMidYMid meet">\n<metadata>\nCreated by potrace 1.15, written by Peter Selinger 2001-2017\n</metadata>\n<g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"\nfill=${e.color} stroke="none">\n<path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6\n-10 -246 -105 -590 -234 -448 -167 -1052 -415 -1173 -483 -78 -43 -193 -91\n-250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340\n-49 -563 -57 l-203 -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\n-150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418\n0 -194 11 -396 26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\n-126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622\n756 722 90 26 112 28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\n140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263\nl-15 -73 3006 7 c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\n259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239\n-63 453 -205 601 -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\n-116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45\n525 79 48 24 97 81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\n680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0\n-226 0 -347 85 -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\n-208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341\n10 -140 81 -187 94 -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\n-422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36\n-485 54 -98 26 -198 119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\n54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12\n-67z m630 47 c264 -18 777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\n274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11\n-27 -907 2 -906 3 -59 160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>\n<path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\n-467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493\n-551 85 -44 178 -78 271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\n86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50\n-354 64 -507 36z m350 -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\n1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360\n0 -320 84 -544 355 -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>\n<path d="M2600 2697 c-36 -13 -85 -36 -109 -51 l-44 -28 116 -115 c81 -82 120\n-114 131 -110 14 6 16 29 16 167 0 186 6 178 -110 137z"/>\n<path d="M2920 2561 c0 -139 2 -162 16 -168 11 -4 50 28 130 108 l115 114 -28\n22 c-34 28 -138 70 -193 79 l-40 7 0 -162z"/>\n<path d="M2282 2448 c-28 -36 -92 -191 -92 -225 0 -10 34 -13 165 -13 151 0\n165 1 165 18 0 15 -206 232 -221 232 -4 0 -11 -6 -17 -12z"/>\n<path d="M3222 2351 c-62 -59 -112 -115 -112 -124 0 -15 17 -17 165 -17 131 0\n165 3 165 13 0 40 -69 205 -95 227 -7 6 -48 -27 -123 -99z"/>\n<path d="M2781 2332 c-12 -22 11 -62 34 -62 8 0 21 10 29 22 20 28 4 58 -29\n58 -13 0 -29 -8 -34 -18z"/>\n<path d="M2749 2161 c-32 -33 -37 -67 -14 -110 29 -57 104 -64 151 -14 53 57\n9 153 -71 153 -27 0 -44 -8 -66 -29z"/>\n<path d="M2570 2125 c-26 -32 13 -81 48 -59 24 16 27 45 6 61 -23 17 -39 16\n-54 -2z"/>\n<path d="M3006 2124 c-20 -19 -20 -38 -2 -54 23 -19 61 -8 64 18 7 44 -32 67\n-62 36z"/>\n<path d="M2190 1975 c0 -29 41 -140 72 -194 l31 -53 117 117 c71 71 116 123\n113 131 -4 11 -40 14 -169 14 -141 0 -164 -2 -164 -15z"/>\n<path d="M3110 1972 c0 -9 51 -68 114 -131 l114 -114 31 54 c30 51 71 165 71\n195 0 11 -31 14 -165 14 -151 0 -165 -1 -165 -18z"/>\n<path d="M2780 1901 c-7 -15 -5 -24 8 -41 32 -40 85 -4 62 41 -14 25 -56 25\n-70 0z"/>\n<path d="M2562 1697 c-61 -62 -112 -115 -112 -119 0 -18 208 -108 249 -108 7\n0 11 54 11 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115 -113z"/>\n<path d="M2933 1803 c-15 -6 -19 -333 -4 -333 46 0 251 88 251 108 0 9 -223\n232 -230 231 -3 0 -11 -3 -17 -6z"/>\n<path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\n-411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118\n380 196 487 396 518 1128 67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\n-407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96\n33 -289 5 -388 -110 -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\n238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207\n81 364 77 109 -3 143 -7 210 -30z"/>\n<path d="M10703 2700 c-54 -19 -153 -71 -153 -80 0 -3 51 -57 114 -119 80 -80\n119 -112 130 -108 14 5 16 29 16 167 l0 160 -27 -1 c-16 0 -52 -9 -80 -19z"/>\n<path d="M11020 2561 c0 -139 2 -162 16 -168 22 -8 247 216 234 232 -17 20\n-163 84 -207 91 l-43 7 0 -162z"/>\n<path d="M10366 2424 c-29 -44 -76 -165 -76 -194 0 -19 7 -20 165 -20 126 0\n165 3 165 13 0 7 -51 63 -114 126 l-114 114 -26 -39z"/>\n<path d="M11313 2348 c-61 -62 -109 -119 -106 -125 6 -15 333 -19 333 -4 0 45\n-88 241 -108 241 -4 0 -57 -51 -119 -112z"/>\n<path d="M10882 2338 c-17 -17 -15 -32 7 -52 16 -14 23 -15 41 -6 31 17 24 64\n-10 68 -14 2 -31 -3 -38 -10z"/>\n<path d="M10846 2159 c-68 -81 17 -194 110 -144 89 48 56 175 -46 175 -30 0\n-44 -6 -64 -31z"/>\n<path d="M10670 2126 c-19 -23 -8 -61 18 -64 44 -7 67 32 36 62 -19 20 -38 20\n-54 2z"/>\n<path d="M11106 2127 c-21 -16 -18 -45 7 -61 37 -23 77 35 41 61 -10 7 -21 13\n-24 13 -3 0 -14 -6 -24 -13z"/>\n<path d="M10290 1970 c0 -29 43 -141 74 -195 l28 -48 116 116 c81 81 113 120\n109 131 -6 14 -29 16 -167 16 -152 0 -160 -1 -160 -20z"/>\n<path d="M11207 1978 c-3 -7 47 -66 111 -130 l116 -118 27 43 c27 44 79 177\n79 203 0 12 -28 14 -164 14 -122 0 -166 -3 -169 -12z"/>\n<path d="M10881 1901 c-14 -25 -5 -48 20 -56 27 -9 51 13 47 44 -4 34 -51 43\n-67 12z"/>\n<path d="M10662 1697 c-61 -62 -112 -115 -112 -119 0 -20 201 -108 247 -108\n10 0 13 34 13 164 0 140 -2 165 -16 170 -9 3 -16 6 -17 6 -1 0 -53 -51 -115\n-113z"/>\n<path d="M11033 1803 c-10 -3 -13 -47 -13 -169 0 -90 4 -164 8 -164 36 0 186\n61 239 98 16 10 -216 242 -234 235z"/>\n</g>\n</svg>`}M.styleTagTransform=g(),M.setAttributes=l(),M.insert=c().bind(null,"head"),M.domAPI=i(),M.insertStyleElement=p(),o()(T.A,M),T.A&&T.A.locals&&T.A.locals;var C=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};const q=e=>C(void 0,void 0,void 0,(function*(){const t=yield fetch("http://127.0.0.1:3000/garage",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(t.ok)return t.json();throw new Error("Error while creating the car")})),P=(...e)=>C(void 0,[...e],void 0,(function*(e=1,t=7){const n=`http://127.0.0.1:3000/garage?_limit=${t}&_page=${e}`,r=yield fetch(n);if(r.ok){const e=yield r.json(),t=r.headers.get("X-Total-Count");return{cars:e,totalCount:Number(t)}}throw new Error("Error while getting cars")}));var L=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};const R=(e,t)=>L(void 0,void 0,void 0,(function*(){const n=`http://127.0.0.1:3000/engine?id=${e}&status=${t}`,r=yield fetch(n,{method:"PATCH"});if(r.ok)return r.json();throw new Error("Error while starting engine")})),$=(e,t)=>L(void 0,void 0,void 0,(function*(){const n=`http://127.0.0.1:3000/engine?id=${e}&status=${t}`,r=yield fetch(n,{method:"PATCH"});if(r.ok)return r.json();throw new Error("Error while car is moving")}));function B(e,t,n,r){const o=document.querySelector(`#car-${n}`),a=null==o?void 0:o.querySelector(".car-img"),i=getComputedStyle(null==o?void 0:o.querySelector(".car")).width,s=getComputedStyle(null==o?void 0:o.querySelector(".car svg")).width,c=a.animate([{transform:"translateX(0px)"},{transform:`translateX(calc(${i} - ${s}))`}],{duration:t,easing:"ease-in-out"});return c.onfinish=()=>{a.style.transform=`translateX(calc(${i} - ${s}))`,r&&r(n)},c.oncancel=()=>{document.querySelector("#racebutton").disabled=!1,document.querySelector("#startbutton").disabled=!1,document.querySelector("#resetbutton").disabled=!0,a.style.transform="translateX(0px)"},c}var N=n(438),H={};H.styleTagTransform=g(),H.setAttributes=l(),H.insert=c().bind(null,"head"),H.domAPI=i(),H.insertStyleElement=p(),o()(N.A,H),N.A&&N.A.locals&&N.A.locals;class I{constructor(){this.page=1}createView(){const e=y("div","pagination"),t=w("NEXT","button",!0);t.id="nextbutton",t.addEventListener("click",this.nextButtonHandler.bind(this)),null==t||t.setAttribute("page",`${this.page}`);const n=w("PREV","button",!0);return n.id="prevbutton",n.addEventListener("click",this.prevButtonHandler.bind(this)),e.append(n,t),e}clearPage(){document.querySelectorAll(this.getPageSelector()).forEach((e=>e.remove()))}}I.pageNumber=1;const j=I;var V=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))};class O extends j{constructor(){super(...arguments),this.CARS_LIMIT_PER_PAGE=7,this.PAGE_SELECTOR=".tracks"}createView(){const e=super.createView(),t=y("div","tracks-view"),n=y("div","tracks-slots");return this.createTracksView(n,e).then((()=>{t.append(n,e)})),t}getPageSelector(){return this.PAGE_SELECTOR}createTrack(e){const t=y("div","tracks");e.id&&(t.id=`car-${e.id}`);const n=y("p","car-name");n.textContent=e.name;const r=y("div","car"),o=y("div","car-img");o.innerHTML+=z(e);const a=y("img");a.src=_,r.append(o,a);const i=y("div","nav-bar"),s=w("SELECT","button");s.addEventListener("click",this.selectButtonHadler.bind(this));const c=w("REMOVE","reset");c.addEventListener("click",this.removeButtonHandler.bind(this));const d=w("START","button");d.id="startbutton",d.addEventListener("click",this.startButtonHandler.bind(this));const l=w("STOP","reset",!0);return l.id="stopbutton",l.addEventListener("click",this.stopButtonHandler.bind(this)),i.append(s,c,d,l),t.append(n,r,i),t}createTracksView(e,t){const n=e||document.querySelector(".tracks-slots"),r=t||document.querySelector(".pagination");return P(this.page).then((e=>{const t=e.totalCount,o=r.querySelector("#nextbutton"),a=r.querySelector("#prevbutton");this.CARS_LIMIT_PER_PAGE*this.page>=t?o.disabled=!0:o.disabled=!1,this.page>1?a.disabled=!1:a.disabled=!0,e.cars.forEach((e=>{n.append(this.createTrack(e))})),document.querySelector(".garage-page__title").textContent=`Garage (${t})`,document.querySelector(".garage-page__number").textContent=`Page №${this.page}`}))}removeButtonHandler(e){const t=e.target.closest(".tracks"),n=Number(null==t?void 0:t.id.replace("car-",""));var r;r=n,V(void 0,void 0,void 0,(function*(){const e=`http://127.0.0.1:3000/winners/${r}`;if(!(yield fetch(e,{method:"DELETE"})).ok)throw new Error("Error while deleting the car")})),(e=>C(void 0,void 0,void 0,(function*(){const t=`http://127.0.0.1:3000/garage/${e}`;if(!(yield fetch(t,{method:"DELETE"})).ok)throw new Error("Error while deleting the car")})))(n).then((()=>{this.clearPage(),this.createTracksView()}))}selectButtonHadler(e){var t;const n=e.target.closest(".tracks"),r=Number(null==n?void 0:n.id.replace("car-","")),o=document.querySelector("#update-form"),a=null===(t=n.querySelector(".car-name"))||void 0===t?void 0:t.textContent;this.enableUpdateForm(o),this.fillUpdateForm(n,o,r,a)}fillUpdateForm(e,t,n,r){var o;const a=e.querySelector("g").getAttribute("fill");null===(o=t.querySelector("button"))||void 0===o||o.setAttribute("carid",n.toString()),t.querySelector("input[type=color]").value=function(e){if(4===e.length){const t=e.slice(1).split("");return`#${t[0]}${t[0]}${t[1]}${t[1]}${t[2]}${t[2]}`}return e}(a),t.querySelector("input[type=text]").value=r}enableUpdateForm(e){e.querySelector(".operations__update").disabled=!1,e.querySelector(".operations__update-color").disabled=!1,e.querySelector(".button").disabled=!1}startButtonHandler(e){const t=e.target.closest(".tracks"),n=e.target.closest(".button"),r=Number(null==t?void 0:t.id.replace("car-",""));n.disabled=!0,t.querySelector("#stopbutton").disabled=!1,R(r,"started").then((e=>Math.round(e.distance/e.velocity))).then((e=>{const t=B(0,e,r);O.animationsMap.set(r,t),$(r,"drive").catch((()=>{R(r,"stopped"),t.pause()}))}))}stopButtonHandler(e){const t=e.target.closest(".tracks"),n=e.target.closest(".button"),r=Number(null==t?void 0:t.id.replace("car-",""));R(r,"stopped").then((()=>{O.animationsMap.get(r).cancel()})),n.disabled=!0,(null==t?void 0:t.querySelector("#startbutton")).disabled=!1}nextButtonHandler(){this.page+=1,this.clearPage(),document.querySelector("#nextbutton").setAttribute("page",this.page.toString()),document.querySelector("#racebutton").disabled=!1,document.querySelector("#resetbutton").disabled=!0,this.createTracksView()}prevButtonHandler(){this.page-=1,this.clearPage(),this.createTracksView()}}O.animationsMap=new Map;const G=O,F=["Aston Martin","Audi","Bentley","BMW","Bugatti","Cadillac","Chevrolet","Chrysler","Citroën","Dodge","Ferrari","Fiat","Ford","Honda","Hummer","Hyundai","Infiniti","Jaguar","Jeep","Kia","Lada","Lamborghini","Land Rover","Lexus","Lotus","Maserati","Maybach","Mazda","McLaren","Mercedes-Benz","Mitsubishi","Nissan","Opel","Peugeot","Porsche","Renault","Rolls-Royce","Skoda","Subaru","Suzuki","Tesla","Toyota","Volkswagen","Volvo"],U=["Corolla","Camry","RAV4","CR-V","Sentra","Civic","HR-V","Accord","Speedtail","Veyron","Agera R","Chiron","Venom GT","3 Series","X1","Z4","X7","5 Series","7 Series","X3","M340i","M4 Competition"],W=()=>{let e="#";for(let t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};class X{createButtonHadler(e){const t=document.querySelector(".operations__create").value,n=document.querySelector(".operations__create-color").value;t&&q({name:t,color:n}).then((()=>{e.clearPage(),e.createTracksView()}))}static updateButtonHandler(){var e;const t=document.querySelector(".operations"),n=document.querySelector("#update-form"),r=Number(null===(e=null==t?void 0:t.querySelector("#update-form .button"))||void 0===e?void 0:e.getAttribute("carid")),o=(null==t?void 0:t.querySelector(".operations__update")).value,a=(null==t?void 0:t.querySelector(".operations__update-color")).value;var i;(i={name:o,color:a,id:r},C(void 0,void 0,void 0,(function*(){const e=`http://127.0.0.1:3000/garage/${i.id}`,t=yield fetch(e,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});if(t.ok)return t.json();throw new Error("Erro while updating car")}))).then((e=>{var t;const n=document.querySelector(`#car-${e.id}`);n.querySelector(".car-name").textContent=e.name,null===(t=n.querySelector("g"))||void 0===t||t.setAttribute("fill",e.color)})),X.prototype.disableUpdateInput(n)}disableUpdateInput(e){e.childNodes.forEach((e=>{const t=e;t instanceof HTMLInputElement&&("text"===t.type?t.value="":t.value=A,t.disabled=!0),t instanceof HTMLButtonElement&&(t.disabled=!0)}))}generateButtonHandler(e){const t=((e=100)=>Array(e).fill(null).map((()=>({name:`${F[Math.floor(Math.random()*F.length)]} ${U[Math.floor(Math.random()*U.length)]}`,color:W()}))))();Promise.allSettled(t.map((e=>q(e)))).then((()=>{e.clearPage(),e.createTracksView()}))}setWinner(e,t){const n={id:t.id,time:e,wins:1};var r;return function(e){var t;const n=y("div","winner-message"),r=y("p");r.textContent=e,n.append(r),null===(t=document.querySelector("body"))||void 0===t||t.append(n),setTimeout((()=>{n.classList.add("hidden")}),8e3)}(`Winner: ${t.name}, time: ${e} ms`),(r=n.id,V(void 0,void 0,void 0,(function*(){const e=`http://127.0.0.1:3000/winners/${r}`,t=yield fetch(e,{method:"GET"});if(t.ok)return t.json();throw new Error("Erro while getting winner")}))).then((()=>{n.wins+=1,(e=>{V(void 0,void 0,void 0,(function*(){const t=`http://127.0.0.1:3000/winners/${e.id}`,n=yield fetch(t,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(n.ok)return n.json();throw new Error("Erro while updating winner")}))})(n)})).catch((()=>{(e=>{V(void 0,void 0,void 0,(function*(){const t=yield fetch("http://127.0.0.1:3000/winners",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});if(t.ok)return t.json();throw new Error("Error while creating winner")}))})(n)})),n}static raceButtonHandler(e){var t;let n;const r=Number(null===(t=document.querySelector("#nextbutton"))||void 0===t?void 0:t.getAttribute("page"));document.querySelector("#racebutton").disabled=!0,document.querySelector("#resetbutton").disabled=!1,P(r).then((e=>{e.cars.forEach((e=>{R(Number(e.id),"started").then((t=>{const r=Math.round(t.distance/t.velocity),o=B(0,r,Number(e.id),(()=>{n||(n=X.prototype.setWinner(r,e))}));G.animationsMap.set(Number(e.id),o),$(Number(e.id),"drive").catch((()=>{R(Number(e.id),"stopped"),o.pause()}))}))}))}))}resetButtonHandler(){var e;const t=Number(null===(e=document.querySelector("#nextbutton"))||void 0===e?void 0:e.getAttribute("page"));P(t).then((e=>{e.cars.forEach((e=>{R(Number(e.id),"stopped").then((()=>{G.animationsMap.get(Number(e.id)).cancel()}))}))}))}}class D{constructor(){this.handlers=new X,this.tracks=new G}create(){const e=y("div","garage-page"),t=y("h1","garage-page__title"),n=y("p","garage-page__number");return e.append(t,n,this.creatOperationBar(),this.tracks.createView()),e}creatOperationBar(){const e=y("div","operations"),t=y("form","row");t.id="create-form";const n=x("operations__create","text"),r=x("operations__create-color","color",A,!1),o=w("CREATE","button");o.addEventListener("click",(()=>{this.handlers.createButtonHadler(this.tracks)})),t.append(n,r,o);const a=y("form","row");a.id="update-form";const i=x("operations__update","text",void 0,!0),s=x("operations__update-color","color",A,!0),c=w("UPDATE","button",!0);c.addEventListener("click",X.updateButtonHandler.bind(this)),a.append(i,s,c);const d=y("div","row"),l=w("RACE");l.id="racebutton",l.addEventListener("click",X.raceButtonHandler.bind(this));const u=w("RESET","reset",!0);u.id="resetbutton",u.addEventListener("click",this.handlers.resetButtonHandler);const p=w("GENERATE CARS");return p.addEventListener("click",(()=>{this.handlers.generateButtonHandler(this.tracks)})),d.append(l,u,p),e.append(t,a,d),e}}var J=n(992),Y={};Y.styleTagTransform=g(),Y.setAttributes=l(),Y.insert=c().bind(null,"head"),Y.domAPI=i(),Y.insertStyleElement=p(),o()(J.A,Y),J.A&&J.A.locals&&J.A.locals;class K{create(){const e=y("header","header"),t=y("nav","navigation"),n=w("TO GARAGE","button",!0);n.id="garagebutton";const r=w("TO WINNERS");r.id="winnerbutton";const o=y("div","logo"),a=y("p");return a.textContent="ASYNCRACE",t.append(n,r),o.append(a),e.append(t,o),e}}var Z=n(918),Q={};Q.styleTagTransform=g(),Q.setAttributes=l(),Q.insert=c().bind(null,"head"),Q.domAPI=i(),Q.insertStyleElement=p(),o()(Z.A,Q),Z.A&&Z.A.locals&&Z.A.locals;class ee extends j{constructor(){super(...arguments),this.WINNERS_LIMIT=10,this.PAGE_SELECTOR="tr",this.sortSettings={sortBy:"time",order:"ASC"}}getPageSelector(){return this.PAGE_SELECTOR}createView(){const e=super.createView(),t=y("div","winners-rating"),n=y("table","winners-rating__table"),r=y("thead");return k.forEach((e=>{const t=y("th");t.textContent=e,"Wins"===e&&(t.id="wins",t.addEventListener("click",(()=>{const e=document.querySelector("tbody");this.clearPage(),this.buildRows(this.page,e,"wins")}))),"Time"===e&&(t.id="time",t.addEventListener("click",(()=>{const e=document.querySelector("tbody");this.clearPage(),this.buildRows(this.page,e,"time")}))),r.append(t)})),n.append(r,this.createTableRows()),t.append(n,e),t}nextButtonHandler(){const e=document.querySelector("tbody");this.page+=1,this.clearPage(),this.buildRows(this.page,e)}prevButtonHandler(){const e=document.querySelector("tbody");this.page-=1,this.clearPage(),this.buildRows(this.page,e)}createTableRows(){const e=y("tbody");return this.buildRows(this.page,e),e}buildRows(e,t,n){n&&this.updateSortSettings(n),((e,...t)=>V(void 0,[e,...t],void 0,(function*(e,t=10,n,r){let o=`http://127.0.0.1:3000/winners?_page=${e}&_limit=${t}`;n&&(o+=`&_sort=${n}`),r&&(o+=`&_order=${r}`);const a=yield fetch(o,{method:"GET"});if(a.ok)return{winners:yield a.json(),totalCount:Number(a.headers.get("X-Total-Count"))};throw new Error("Error while getting all winners")})))(e,this.WINNERS_LIMIT,this.sortSettings.sortBy,this.sortSettings.order).then((e=>{const n=e.totalCount,r=document.querySelector(".winners-page #nextbutton"),o=document.querySelector(".winners-page #prevbutton");this.WINNERS_LIMIT*this.page>=n?r.disabled=!0:r.disabled=!1,this.page>1?o.disabled=!1:o.disabled=!0,document.querySelector(".winners-page__title").textContent=`Winners (${n})`,document.querySelector(".winners-page__number").textContent=`Page №${this.page}`,this.generateRows(e,t)}))}updateSortSettings(e){e===this.sortSettings.sortBy?this.sortSettings.order="ASC"===this.sortSettings.order?"DESC":"ASC":(this.sortSettings.sortBy=e,this.sortSettings.order="ASC")}generateRows(e,t){let n=0;e.winners.forEach((e=>{const r=y("tr"),o=y("td"),a=y("td"),i=y("td"),s=y("td"),c=y("td");var d;n+=1,o.textContent=`${n}`,(d=e.id,C(void 0,void 0,void 0,(function*(){const e=`http://127.0.0.1:3000/garage/${d}`,t=yield fetch(e,{method:"GET"});if(t.ok)return t.json();throw new Error("Error while getting car")}))).then((e=>(i.textContent=`${e.name}`,e))).then((e=>{a.innerHTML+=z(e)})),s.textContent=`${e.wins}`,c.textContent=`${(e.time/1e3).toFixed(1)}`,r.append(o,a,i,s,c),t.append(r)}))}}class te{create(){const e=y("div","winners-page"),t=y("h1","winners-page__title"),n=y("p","winners-page__number"),r=new ee;return e.append(t,n,r.createView()),e}}window.addEventListener("unhandledrejection",(e=>{var t;const n=y("div","error-message"),r=y("p");r.textContent="Something went wrong. Please, contact system administrator",n.append(r),null===(t=document.querySelector("body"))||void 0===t||t.append(n),e.preventDefault()})),document.addEventListener("DOMContentLoaded",(function(){var e,t;const n=document.getElementById("body"),r=new K,o=new D,a=new te;return null==n||n.append(r.create(),o.create()),null===(e=document.querySelector("#winnerbutton"))||void 0===e||e.addEventListener("click",(()=>{var e;null===(e=document.querySelector(".garage-page"))||void 0===e||e.remove(),document.querySelector("#winnerbutton").disabled=!0,document.querySelector("#garagebutton").disabled=!1,n.append(a.create())})),null===(t=document.querySelector("#garagebutton"))||void 0===t||t.addEventListener("click",(()=>{var e;null===(e=document.querySelector(".winners-page"))||void 0===e||e.remove(),document.querySelector("#winnerbutton").disabled=!1,document.querySelector("#garagebutton").disabled=!0,n.append(o.create())})),n}))}},e=>{e(e.s=370)}]);